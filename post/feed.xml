<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Zer0d0y(段公子)&#39;s Blog</title>
    <link>https://www.zer0d0y.info/post/feed/index.xml</link>
    <description>Recent content in Posts on Zer0d0y(段公子)&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <copyright>Copyright (c) 2017. All rights reserved.</copyright>
    <lastBuildDate>Wed, 01 Feb 2017 15:34:26 +0800</lastBuildDate>
    <atom:link href="https://www.zer0d0y.info/post/feed/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>2017 价值</title>
      <link>https://www.zer0d0y.info/post/keywords-of-this-year/</link>
      <pubDate>Wed, 01 Feb 2017 15:34:26 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/keywords-of-this-year/</guid>
      <description>&lt;p&gt;&lt;embed src=&#39;http://player.youku.com/player.php/sid/XMjQ4ODE2MjIxMg==/v.swf&#39; allowFullScreen=&#39;true&#39; quality=&#39;high&#39; width=&#39;480&#39; height=&#39;400&#39; align=&#39;middle&#39; allowScriptAccess=&#39;always&#39; type=&#39;application/x-shockwave-flash&#39;&gt;&lt;/embed&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>30天体验4全马</title>
      <link>https://www.zer0d0y.info/post/4-marathon-of-30d/</link>
      <pubDate>Fri, 06 Jan 2017 14:09:48 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/4-marathon-of-30d/</guid>
      <description>&lt;p&gt;&lt;strong&gt;尽情呼吸,&lt;/strong&gt;
&lt;strong&gt;放肆奔跑,&lt;/strong&gt;
&lt;strong&gt;强健体魄,&lt;/strong&gt;
&lt;strong&gt;KEEP PASSION!!!&lt;/strong&gt;&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/IMG_9637.jpg&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;table class=&#34;image&#34;&gt;
&lt;caption align=&#34;bottom&#34;&gt; &#34;生命不能总是记忆,需要记录&#34; &lt;/caption&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;全文:&lt;/strong&gt; &lt;a href=&#34;http://weibo.com/ttarticle/p/show?id=2309404060672932622444&#34;&gt;30天体验4全马&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>DevSecOps</title>
      <link>https://www.zer0d0y.info/post/DevSecOps/</link>
      <pubDate>Wed, 07 Dec 2016 18:04:03 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/DevSecOps/</guid>
      <description>

&lt;p&gt;&lt;strong&gt;TL;DR -&lt;/strong&gt; 曾先后为两家创业公司设计整体系统架构，在任职期间线上系统未发生任何安全问题（包括：系统被攻陷、架构本身不安全、数据丢失等）。本文将探讨在创业公司如何实施&lt;a href=&#34;http://www.devsecops.org/&#34;&gt;DevSecOps&lt;/a&gt;以保障线上业务系统的安全性。&lt;/p&gt;

&lt;h2 id=&#34;目标或基本原则&#34;&gt;目标或基本原则&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;从技术角度：&lt;/strong&gt;设计一个联网的系统至少应该满足三条原则，安全、稳定、高效（或者说需要达到这样一个目标）。&lt;br /&gt;
①.&lt;a href=&#34;https://www.owasp.org/index.php/Security_by_Design_Principles&#34;&gt;Security by Design&lt;/a&gt;&lt;br /&gt;
②.7x24 online&lt;br /&gt;
③.弹性&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;从人的角度：&lt;/strong&gt;做好产品、创造价值。一名优秀的工程师需要有CEO的思维，目前的现状是，大多数软件工程师没有产品意识，而大多数运维工程师不懂安全，这种情况对创业公司非常危险。&lt;/p&gt;

&lt;h2 id=&#34;知己知彼-未知攻-焉知防&#34;&gt;知己知彼（未知攻，焉知防）&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;创业公司典型网络架构：&lt;/strong&gt;&lt;/p&gt;

&lt;h6 id=&#34;1-现如今大多数创业公司都会把服务部署在公有云上-如-aws-google-cloud-platform-aliyun等-我们先来看一下云环境下如何设计系统架构&#34;&gt;1.现如今大多数创业公司都会把服务部署在公有云上（如，AWS、Google Cloud Platform、aliyun等），我们先来看一下云环境下如何设计系统架构，&lt;/h6&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/4.png&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;数据库安全&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;DB集群只允许前端（Web服务器）访问数据库服务，DB集群内部及与前端全部使用内网IP访问。
实现：集群之间使用Iptables主机级别访问控制（内外网），集群与前端之间使用Iptables端口级别访问控制。开放管理网络访问权限（SSH）,使用Public Key认证+固定IP。&lt;/li&gt;
&lt;li&gt;Kernel hardening、DB监听内网IP、安全更新/patch、MongoDB hardening&lt;/li&gt;
&lt;li&gt;数据安全
集群定时备份，加密备份到ali OSS。&lt;/li&gt;
&lt;li&gt;监控、审计
监控服务状态/性能、登录事件。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;应用服务器（Web/backend服务器）&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;使用内网IP连接前端代理和后端DB集群，web/backend服务监听内网地址。&lt;/li&gt;
&lt;li&gt;开放管理网络访问权限（SSH）,使用Public Key认证+固定IP，开发人员远程访问（key+固定IP）&lt;/li&gt;
&lt;li&gt;审计、监控、日志分析
操作/登录事件等。Zabbix、monit、logstash&lt;/li&gt;
&lt;li&gt;应用层漏洞（LFI/NoSQL injection 等）和应用层攻击（CC等）&lt;/li&gt;
&lt;li&gt;Kernel hardening、安全更新/patch、Nginx hardening&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;存在问题：&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;阿里内网攻击（L2）&lt;/li&gt;
&lt;li&gt;Iptables 限制（性能及安全问题（raw sockets、tracking helpers）），SSH可选安全（port knock，two factor authentication）&lt;/li&gt;
&lt;li&gt;应用层请求&lt;/li&gt;
&lt;li&gt;0day、RCE&lt;/li&gt;
&lt;li&gt;DDOS大流量攻击、单点故障（目前服务器全部在阿里杭州机房）&lt;/li&gt;
&lt;li&gt;客户端及人&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h6 id=&#34;2-自建数据中心或idc托管环境下如何设计系统架构&#34;&gt;&lt;strong&gt;2.自建数据中心或IDC托管环境下如何设计系统架构&lt;/strong&gt;&lt;/h6&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/540.png&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;数据交互&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;所有服务器有内外两个网卡,内网网卡通过华为 S5700 交换机互联形成局域网。 MongoDB 数据同步、Zabbix 监控取数据等,全部走内网。&lt;/li&gt;
&lt;li&gt;前端部署 Nginx 主从架构,默认所有力量走 Nginx 主服务器,主服务器挂掉后,所有流量自动切换自Nginx 从服务器。&lt;/li&gt;
&lt;li&gt;3 台 MongoDB 服务器组成一个复制集( MongoDB Replica Set )&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;监控&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Zabbix 进行系统资源等监控&lt;/li&gt;
&lt;li&gt;Monit 进程、服务、关键文件等监控&lt;/li&gt;
&lt;li&gt;阿里云监控&lt;/li&gt;
&lt;li&gt;MongoDB MMS 监控&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;安全&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;数据安全
MongoDB 复制集、数据库每天每 6 小时自动备份并同步到另外一台服务器(保证两份 COPY )&lt;/li&gt;
&lt;li&gt;网络 / 系统安全&lt;/li&gt;
&lt;li&gt;硬件防火墙&lt;/li&gt;
&lt;li&gt;使用核心交换机端口镜像功能部署Bro NSM和ELK日志分析平台&lt;/li&gt;
&lt;li&gt;系统审计 audit ,账号的所有操作都会记录并保存(部分已部署为推送到 ELK 平台)&lt;/li&gt;
&lt;li&gt;服务器登录使用 SSH key ,部分开发人员有需要访问的服务器的普通用户权限。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;获取资源的能力&#34;&gt;&lt;strong&gt;获取资源的能力&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;没有绝对安全的系统，攻防对抗的时代，技术从业人员必须即时跟踪最新安全动态。&lt;br /&gt;
这里推荐几个Mailing list&lt;br /&gt;
&lt;a href=&#34;http://seclists.org/rss/fulldisclosure.rss&#34;&gt;Full Disclosure — A public, vendor-neutral forum for detailed discussion of vulnerabilities and exploitation techniques, as well as tools, papers, news, and events of interest to the community.&lt;/a&gt;&lt;br /&gt;
&lt;a href=&#34;http://seclists.org/rss/bugtraq.rss&#34;&gt;Bugtraq — The premier general security mailing list. Vulnerabilities are often announced here first, so check frequently!&lt;/a&gt;&lt;br /&gt;
&lt;a href=&#34;http://seclists.org/rss/dailydave.rss&#34;&gt;Daily Dave — This technical discussion list covers vulnerability research, exploit development, and security events/gossip.&lt;/a&gt;&lt;br /&gt;
&lt;a href=&#34;http://seclists.org/rss/oss-sec.rss&#34;&gt;Open Source Security — Discussion of security flaws, concepts, and practices in the Open Source community&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;另外，系统架构中使用的OS和应用服务必须订阅其官方的Mailing list。&lt;/p&gt;

&lt;h6 id=&#34;最后我想用google公司的著名安全专家michal-zalewski的一句话来总结&#34;&gt;&lt;strong&gt;最后我想用Google公司的著名安全专家Michal Zalewski的一句话来总结：&lt;/strong&gt;&lt;/h6&gt;

&lt;h5 id=&#34;再好的安全产品-也没办法取代技术人员对实际环境的把握和对技术的精通&#34;&gt;&lt;strong&gt;再好的安全产品，也没办法取代技术人员对实际环境的把握和对技术的精通。&lt;/strong&gt;&lt;/h5&gt;
</description>
    </item>
    
    <item>
      <title>“风花雪月”第一峰</title>
      <link>https://www.zer0d0y.info/post/The-First-Peak-of-Pengcheng/</link>
      <pubDate>Sat, 12 Nov 2016 18:14:42 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/The-First-Peak-of-Pengcheng/</guid>
      <description>

&lt;h5 id=&#34;已然无法记忆下一次是第几十几次登梧桐-鹏城第一峰-梧桐山由于其独特的地理位置-若天公作美-一天内可见-四时之景&#34;&gt;&lt;strong&gt;已然无法记忆下一次是第几十几次登梧桐（鹏城第一峰），梧桐山由于其独特的地理位置，若天公作美，一天内可见&amp;rdquo;四时之景&amp;rdquo;。&lt;/strong&gt;&lt;/h5&gt;

&lt;p&gt;据说大理最有名的景致叫做&lt;strong&gt;“风花雪月”&lt;/strong&gt;——风是“下关风”，下关有天生桥，传说观音在那里打翻了风瓶，所以风大，其实比起北方的朔风，下关风是大大逊色的，但在气候温和的大理尤其是冬天，下关风颇有冷硬的气质。花是“上关花”，传说上关曾盛产奇异的龙女花，到了后来所谓的“花”指的就是上关的女孩子，因为上关、周城现在仍是非常本真的白族居住地，当地人善于制作有名的扎染工艺品，而这一带白族女孩的衣饰也尤为绚丽，宛若鲜花。雪是“苍山雪”，说的是冬天降雪，很少会下到坝子里去，而苍山顶上却会积一簇融融白雪，任天气晴好，山顶的银白也不见消融。月是“洱海月”，黄昏时分，金黄的圆月映照在粼粼的洱海上，岸边的渔家小船轻轻荡漾，温馨无限。一直以来，大理人提到“风花雪月”的典故时，都有一种由热爱而生的微微自豪。&lt;/p&gt;

&lt;p&gt;
&lt;figure &gt;
    
        &lt;img src=&#34;images/first-peak/IMG_7098.JPG&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/first-peak/IMG_5423.JPG&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/first-peak/IMG_5429.JPG&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/first-peak/IMG_8561.JPG&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/first-peak/835507268851410138.jpg&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/first-peak/895362948757392429.jpg&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/first-peak/232840252652886495.jpg&#34; /&gt;
    
    
&lt;/figure&gt;
&lt;/p&gt;

&lt;p&gt;&lt;embed src=&#39;http://player.youku.com/player.php/sid/XMjUwOTU0MDI0MA==/v.swf&#39; allowFullScreen=&#39;true&#39; quality=&#39;high&#39; width=&#39;680&#39; height=&#39;600&#39; align=&#39;middle&#39; allowScriptAccess=&#39;always&#39; type=&#39;application/x-shockwave-flash&#39;&gt;&lt;/embed&gt;&lt;/p&gt;

&lt;h2 id=&#34;风雪梧桐山-2016年1月24日&#34;&gt;风雪梧桐山 - 2016年1月24日&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;大自然又一次让我感到了恐惧、无助。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;帅哥你头低一点，我要拍照。。
慢一点，慢一点，慢一点，把重心放低，一次一步，一次一步，一。。，扑通，前面又有人花式滑冰。。&lt;br /&gt;
He（呵？）。。旁边似乎又有人摔倒，你知道吗，我想拉住他啊，可是我不敢啊，我一动，马上摔倒，一倒马上把前面的人绊倒，你知道当时有多凶险吗，无边的恐惧跟无助从骨子里涌上心头，我麻木了，多年来建立的所有心里防线，全部在瞬间土崩瓦解。谁懂？？？&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;对于未知，请始终保持敬畏！！&lt;/strong&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>磨房深圳百公里2016</title>
      <link>https://www.zer0d0y.info/post/doyouhike-sz100km-2016/</link>
      <pubDate>Sat, 26 Mar 2016 18:00:24 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/doyouhike-sz100km-2016/</guid>
      <description>

&lt;h5 id=&#34;向最美的人致敬&#34;&gt;&lt;strong&gt;向最美的人致敬&lt;/strong&gt;&lt;/h5&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/sz100km-2016/IMG_8100.JPG&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;h5 id=&#34;百公里记录-右键放大图片&#34;&gt;&lt;strong&gt;百公里记录（右键放大图片）&lt;/strong&gt;&lt;/h5&gt;

&lt;p&gt;
&lt;figure &gt;
    
        &lt;img src=&#34;images/sz100km-2016/IMG_8098.JPG&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/sz100km-2016/IMG_8099.jpg&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/sz100km-2016/IMG_8075.JPG&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;images/sz100km-2016/100km-rec.jpg&#34; /&gt;
    
    
&lt;/figure&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>墙外的世界</title>
      <link>https://www.zer0d0y.info/post/outdoor_of_FW/</link>
      <pubDate>Wed, 23 Dec 2015 10:48:47 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/outdoor_of_FW/</guid>
      <description>&lt;iframe id=&#34;iframe_container&#34; frameborder=&#34;0&#34; webkitallowfullscreen=&#34;&#34; mozallowfullscreen=&#34;&#34; allowfullscreen=&#34;&#34; width=&#34;550&#34; height=&#34;400&#34; src=&#34;https://prezi.com/embed/reveeovpcfle/?bgcolor=ffffff&amp;amp;lock_to_path=0&amp;amp;autoplay=0&amp;amp;autohide_ctrls=0&amp;amp;landing_data=bHVZZmNaNDBIWnNjdEVENDRhZDFNZGNIUE1JdGtYV3lxSnR0S0o1NUg1ejBVTmZnbFVQNFpGU081Z25UeWtsU0N3PT0&amp;amp;landing_sign=M3IBudY_GchmrbWyJuPpUk0YE_2xjWKvuU63JKQtOvM&#34;&gt;&lt;/iframe&gt;
</description>
    </item>
    
    <item>
      <title>人生十年</title>
      <link>https://www.zer0d0y.info/post/ten-years/</link>
      <pubDate>Mon, 15 Jun 2015 21:36:26 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/ten-years/</guid>
      <description>&lt;p&gt;&lt;img src=&#34;images/Ten_year1.jpg&#34; alt=&#34;github2016&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>定制Wireshark profile，自动识别攻击类型</title>
      <link>https://www.zer0d0y.info/post/Wireshark-profiles/</link>
      <pubDate>Fri, 10 Aug 2012 21:10:12 +0800</pubDate>
      
      <guid>https://www.zer0d0y.info/post/Wireshark-profiles/</guid>
      <description>


&lt;figure &gt;
    
        &lt;img src=&#34;images/Wireshark01.png&#34; /&gt;
    
    
&lt;/figure&gt;


&lt;h2 id=&#34;江湖传言-vi-编辑器之神-emacs-神的编辑器-wireshark-协议分析神器&#34;&gt;&lt;strong&gt;江湖传言 ——&lt;/strong&gt; Vi - 编辑器之神，Emacs - 神的编辑器，Wireshark - 协议分析神器。&lt;/h2&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;About Wireshark&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Wireshark is the world’s foremost and widely-used network protocol analyzer.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;About Wireshark Profile&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Configuration Profiles can be used to configure and use more than one set of preferences and configurations. —— &lt;strong&gt;定制配置（捕捉/显示过滤器、颜色规则等），在不同Profile之间快速切换，自动识别攻击类型。（基于定制的规则）&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;定制Wireshark Profile：&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;方法1：
点Edit —— Configuration Profiles  —— New（快捷键Shift-Ctrl-A）&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;方法2：
在Wireshark主窗口下方状态栏右击Profile —— New（或者Manage Profiles）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Wireshark Profiles配置文件目录：&lt;/strong&gt;&lt;br /&gt;
Linux&lt;br /&gt;
$HOME/.wireshark/profiles/&lt;br /&gt;
Windows &lt;sup&gt;7&lt;/sup&gt;&amp;frasl;&lt;sub&gt;8&lt;/sub&gt;&lt;br /&gt;
C:\Users&amp;lt;用户名&amp;gt;\AppData\Roaming\Wireshark\profiles&lt;/p&gt;

&lt;p&gt;效果图（右键放大查看）

&lt;figure &gt;
    
        &lt;img src=&#34;images/DNS-Query-flood.png&#34; /&gt;
    
    
&lt;/figure&gt;
&lt;/p&gt;

&lt;p&gt;参考：
&lt;a href=&#34;https://www.wireshark.org/docs/wsug_html_chunked/ChCustConfigProfilesSection.html&#34;&gt;Configuration Profiles&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>